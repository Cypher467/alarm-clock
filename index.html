<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vanilla Nova – Clock & Alarms</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#0f0526;
    --bg2:#2b0b5e;
    --card:#140a2f99; /* glass */
    --text:#e9d7ff;
    --muted:#b79ce6;
    --accent1:#b845ff;
    --accent2:#ff4fd8;
    --ok:#63ffb4;
    --danger:#ff6b8a;
    --shadow: 0 20px 40px rgba(0,0,0,.45);
    --radius: 20px;
  }
  *{ box-sizing: border-box; }
  html,body{ height:100%; }
  body{
    margin:0;
    font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background: radial-gradient(1200px 800px at 20% -20%, rgba(255,0,199,.25), transparent 60%),
                radial-gradient(1100px 700px at 120% 120%, rgba(124,0,255,.2), transparent 60%),
                linear-gradient(135deg,var(--bg1),var(--bg2));
    color:var(--text);
    display:grid;
    place-items:center;
    padding:32px;
  }

  .card{
    width:min(880px, 96vw);
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.12);
    backdrop-filter: blur(12px);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding:28px;
  }

  .title{
    text-align:center;
    font-weight:800;
    font-size: clamp(26px, 3vw, 36px);
    letter-spacing:.5px;
    margin: 4px 0 18px;
    background: linear-gradient(90deg, var(--accent2), var(--accent1));
    -webkit-background-clip: text;
    background-clip:text;
    color: transparent;
  }

  .clock{
    text-align:center;
    font-weight:800;
    font-size: clamp(54px, 11vw, 120px);
    line-height:1;
    margin: 6px 0 8px;
  }

  .date{
    text-align:center;
    color: var(--muted);
    font-weight:500;
    margin-bottom: 26px;
  }

  .row{
    display:grid;
    grid-template-columns: 180px 1fr 190px;
    gap:14px;
    align-items:center;
  }

  label.small { font-size:12px; color:var(--muted); display:block; margin-bottom:6px; }

  .input, .btn{
    height: 48px;
    border-radius: 14px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: var(--text);
    padding: 0 14px;
    outline:none;
    transition:.2s ease;
  }
  .input:focus{ box-shadow: 0 0 0 3px rgba(184,69,255,.25); }

  .btn{
    display:inline-flex;
    align-items:center; justify-content:center;
    font-weight:700;
    cursor:pointer;
    gap:10px;
    background: linear-gradient(90deg, var(--accent1), var(--accent2));
    border:none;
  }
  .btn:hover{ filter:saturate(1.1) brightness(1.03); transform: translateY(-1px); }
  .btn:active{ transform: translateY(0); }

  .section-label{
    margin: 22px 0 10px;
    font-weight:700;
    color:#c8b3ff;
    display:flex;
    align-items:center;
    gap:10px;
    opacity:.95;
  }

  .alarms{
    margin-top:8px;
    display:grid;
    gap:12px;
  }

  .alarm{
    background: rgba(255,255,255,.04);
    border:1px solid rgba(255,255,255,.1);
    border-radius:16px;
    padding:14px 16px;
    display:grid;
    grid-template-columns: auto 1fr auto;
    align-items:center;
    gap:14px;
  }

  .time{
    font-weight:800;
    font-size: 22px;
  }

  .label{
    color:var(--muted);
    font-size: 13px;
    margin-top:2px;
  }

  /* Toggle */
  .toggle{
    --w:52px; --h:28px;
    appearance: none;
    width:var(--w); height:var(--h);
    background: rgba(255,255,255,.15);
    border:1px solid rgba(255,255,255,.18);
    border-radius:999px;
    position:relative;
    cursor:pointer;
    transition:.2s ease;
  }
  .toggle:before{
    content:"";
    position:absolute; top:50%; left:3px;
    width:22px; height:22px; border-radius:50%;
    transform: translateY(-50%);
    background:white;
    transition:.2s cubic-bezier(.2,.6,.2,1);
    box-shadow: 0 2px 6px rgba(0,0,0,.35);
  }
  .toggle:checked{
    background: linear-gradient(90deg, #4cf0a6, #3bb9ff);
    border-color: transparent;
  }
  .toggle:checked:before{ left: calc(100% - 25px); }

  .trash{
    width:36px; height:36px; border-radius:12px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.05);
    display:grid; place-items:center;
    cursor:pointer;
    transition:.2s ease;
  }
  .trash:hover{ background: rgba(255,255,255,.12); border-color: rgba(255,255,255,.2); }
  .trash svg{ width:18px; height:18px; fill: var(--danger); }

  /* Ring modal */
  .modal{
    position: fixed; inset:0;
    display:none; place-items:center;
    background: rgba(0,0,0,.55);
    padding:20px;
  }
  .modal.active{ display:grid; }
  .modal-card{
    width:min(520px, 94vw);
    background: linear-gradient(180deg, rgba(255,255,255,.1), rgba(255,255,255,.05));
    border:1px solid rgba(255,255,255,.2);
    border-radius:18px; padding:22px;
    text-align:center;
    box-shadow: var(--shadow);
  }
  .modal h3{ margin:6px 0 6px; font-size:26px; }
  .modal p{ color:var(--muted); margin:0 0 18px; }
  .modal .btn{
    width:100%; height:50px; border-radius:14px;
    background: linear-gradient(90deg, #ff6b8a, #ff8cc6);
    font-weight:800;
  }

  .footer{
    text-align:center; color: #9a7fd6; font-size:12px; margin-top:16px; opacity:.9;
  }

  @media (max-width:640px){
    .row{ grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
  <main class="card" role="application">
    <h1 class="title">Vanilla Nova</h1>
    <div class="clock" id="clock">00:00:00</div>
    <div class="date" id="date">Monday, January 1, 1970</div>

    <div class="row" style="margin-top:18px">
      <div>
        <label class="small" for="time">Time</label>
        <input id="time" class="input" type="time" required>
      </div>
      <div>
        <label class="small" for="label">Label</label>
        <input id="label" class="input" type="text" placeholder="Morning Workout">
      </div>
      <div style="align-self:end;">
        <button id="add" class="btn" title="Add Alarm" aria-label="Add Alarm">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 5v14M5 12h14" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Add Alarm
        </button>
      </div>
    </div>

    <div class="section-label">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M6 8l-2-2m16 2l2-2M6 8v10a2 2 0 002 2h8a2 2 0 002-2V8M6 8h12M9 12h6" stroke="#b79ce6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Alarms</span>
    </div>

    <div id="alarms" class="alarms" aria-live="polite"></div>

  </main>

  <!-- Ring modal -->
  <div id="ringModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="ringTitle">
    <div class="modal-card">
      <h3 id="ringTitle">Alarm</h3>
      <p id="ringLabel">It’s time!</p>
      <button class="btn" id="stop">Stop Alarm</button>
    </div>
  </div>

<script>
(function(){
  const clockEl = document.getElementById('clock');
  const dateEl  = document.getElementById('date');
  const timeIn  = document.getElementById('time');
  const labelIn = document.getElementById('label');
  const addBtn  = document.getElementById('add');
  const listEl  = document.getElementById('alarms');

  const ringModal = document.getElementById('ringModal');
  const ringTitle = document.getElementById('ringTitle');
  const ringLabel = document.getElementById('ringLabel');
  const stopBtn   = document.getElementById('stop');

  // Simple tone (no external files)
  let audioCtx, osc, gain;
  function startTone(){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    osc = audioCtx.createOscillator();
    gain = audioCtx.createGain();
    osc.type = 'square';
    osc.frequency.setValueAtTime(660, audioCtx.currentTime);
    gain.gain.setValueAtTime(0.001, audioCtx.currentTime);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    // Beeping envelope
    let on = true;
    const beep = () => {
      if(!osc) return;
      gain.gain.setTargetAtTime(on ? 0.25 : 0.001, audioCtx.currentTime, 0.03);
      on = !on;
    };
    window._beepInt = setInterval(beep, 300);
  }
  function stopTone(){
    clearInterval(window._beepInt);
    if(osc){ osc.stop(); osc.disconnect(); osc=null; }
    if(gain){ gain.disconnect(); gain=null; }
    if(audioCtx){ audioCtx.close(); audioCtx=null; }
  }

  // Utilities
  const pad = n => String(n).padStart(2,'0');

  function nowParts(){
    const d = new Date();
    return {
      h: d.getHours(),
      m: d.getMinutes(),
      s: d.getSeconds(),
      date: d
    };
  }

  function fmtHM(h, m){
    return `${pad(h)}:${pad(m)}`;
  }

  function updateClock(){
    const {h,m,s,date} = nowParts();
    clockEl.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    dateEl.textContent = date.toLocaleDateString(undefined, {
      weekday:'long', year:'numeric', month:'long', day:'numeric'
    });
  }

  // Alarms store
  let alarms = load();
  render();

  // Default time input = next minute
  (function setDefaultTime(){
    const d = new Date(Date.now()+60*1000);
    timeIn.value = `${pad(d.getHours())}:${pad(d.getMinutes())}`;
  })();

  addBtn.addEventListener('click', () => {
    if(!timeIn.value) return;
    const [hh,mm] = timeIn.value.split(':').map(v=>parseInt(v,10));
    const label = labelIn.value.trim() || 'Alarm';
    const id = crypto.randomUUID();
    alarms.push({ id, h:hh, m:mm, label, enabled:true, lastFire:'' });
    labelIn.value = '';
    save(); render();
  });

  function render(){
    listEl.innerHTML = '';
    if(alarms.length === 0){
      const empty = document.createElement('div');
      empty.style.color = 'var(--muted)';
      empty.style.textAlign = 'center';
      empty.style.padding = '16px 0';
      empty.textContent = 'No alarms yet. Add one above.';
      listEl.appendChild(empty);
      return;
    }

    for(const a of alarms){
      const row = document.createElement('div');
      row.className = 'alarm';

      // Toggle
      const toggle = document.createElement('input');
      toggle.type = 'checkbox';
      toggle.className = 'toggle';
      toggle.checked = !!a.enabled;
      toggle.title = 'Enable/Disable alarm';
      toggle.addEventListener('change', ()=>{
        a.enabled = toggle.checked;
        save();
      });

      // Time + label
      const text = document.createElement('div');
      const t = document.createElement('div');
      t.className = 'time';
      t.textContent = fmtHM(a.h,a.m);
      const l = document.createElement('div');
      l.className = 'label';
      l.textContent = a.label;
      text.appendChild(t); text.appendChild(l);

      // Delete
      const del = document.createElement('button');
      del.className = 'trash';
      del.innerHTML = `<svg viewBox="0 0 24 24"><path d="M9 3h6l1 2h4v2H4V5h4l1-2zm1 6v8h2V9h-2zm4 0v8h2V9h-2z"/></svg>`;
      del.title = 'Delete alarm';
      del.addEventListener('click', ()=>{
        alarms = alarms.filter(x=>x.id!==a.id);
        save(); render();
      });

      row.appendChild(toggle);
      row.appendChild(text);
      row.appendChild(del);
      listEl.appendChild(row);
    }
  }

  // Check alarms every second
  setInterval(()=>{
    updateClock();
    const {h,m,s,date} = nowParts();
    if(s !== 0) return; // fire only on exact minute
    const today = date.toISOString().slice(0,10); // YYYY-MM-DD
    alarms.forEach(a=>{
      if(!a.enabled) return;
      if(a.h===h && a.m===m && a.lastFire !== `${today}-${h}:${m}`){
        a.lastFire = `${today}-${h}:${m}`;
        save();
        ring(a);
      }
    });
  }, 1000);
  updateClock();

  function ring(a){
    ringTitle.textContent = `${pad(a.h)}:${pad(a.m)}`;
    ringLabel.textContent = a.label || 'Alarm';
    ringModal.classList.add('active');
    startTone();
  }
  stopBtn.addEventListener('click', ()=>{
    ringModal.classList.remove('active');
    stopTone();
  });
  ringModal.addEventListener('click', (e)=>{
    if(e.target === ringModal){
      ringModal.classList.remove('active');
      stopTone();
    }
  });

  function save(){ localStorage.setItem('vn_alarms', JSON.stringify(alarms)); }
  function load(){ try{ return JSON.parse(localStorage.getItem('vn_alarms'))||[] }catch{ return [] } }
})();
</script>
</body>
</html>
